{
    "sourceFile": "backend/lib/backEvents.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1738504078403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1738504090153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n-import { Notifications\r\n-import { MedicalStuffRegex } from \"./constants.js\";\r\n+import { Notifications } from \"../db/schema/notification\";\r\n+import { MedicalStuffRegex\r\n export const systemNotifications = (title, user, newUser) => {\r\n   const systemNotification = {\r\n     newUserHasJoined: {\r\n       type: \"New Member\",\r\n"
                },
                {
                    "date": 1738504104369,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n-import { Notifications } from \"../db/schema/notification\";\r\n-import { MedicalStuffRegex\r\n+import { Notifications } from \"../db/schema/notification.js\";\r\n+import { MedicalStuffRegex } from \"./constants\";\r\n export const systemNotifications = (title, user, newUser) => {\r\n   const systemNotification = {\r\n     newUserHasJoined: {\r\n       type: \"New Member\",\r\n"
                }
            ],
            "date": 1738504078403,
            "name": "Commit-0",
            "content": "import { Notifications\r\nimport { MedicalStuffRegex } from \"./constants.js\";\r\nexport const systemNotifications = (title, user, newUser) => {\r\n  const systemNotification = {\r\n    newUserHasJoined: {\r\n      type: \"New Member\",\r\n      description: `New Member (${newUser.name}) Has Joined Our Community`,\r\n      title: \"System Administration\",\r\n      assignedTo: \"AdminOnly\",\r\n    },\r\n    emailVerification: {\r\n      type: \"Email Verification\",\r\n      description: \"Please Verify Your Email\",\r\n      title: \"System Administration\",\r\n      assignedTo: \"All\",\r\n      eventId: user._id,\r\n    },\r\n  };\r\n\r\n  return systemNotification[`${title}`];\r\n};\r\n\r\nexport const generateRandomToken = () => {\r\n  const token = crypto.randomBytes(32).toString(\"hex\");\r\n  return token;\r\n};\r\n\r\nexport const getUserNotifications = async (user) => {\r\n  let notifications;\r\n  switch (user.role) {\r\n    case \"Admin\":\r\n      notifications = await Notifications.find({\r\n        createdAt: { $gt: user.createdAt },\r\n        $or: [\r\n          { assignedTo: \"All\", eventId: user._id },\r\n          { assignedTo: \"AdminOnly\", user: { $ne: user._id } },\r\n          { assignedTo: \"AdminsFromAll\" },\r\n        ],\r\n      });\r\n      return notifications;\r\n    case \"Resident Doctor\":\r\n      notifications = await Notifications.find({\r\n        createdAt: { $gt: user.createdAt },\r\n        $or: [{ assignedTo: \"All\", eventId: user._id }],\r\n      });\r\n      return notifications;\r\n    default:\r\n      return notifications;\r\n  }\r\n};\r\n\r\nexport const assignedNotifications = (user) => {\r\n  switch (user.role) {\r\n    case \"Admin\":\r\n      return \"AdminOnly\";\r\n    default:\r\n      return \"AdminsFromAll\";\r\n  }\r\n};\r\n\r\n"
        }
    ]
}