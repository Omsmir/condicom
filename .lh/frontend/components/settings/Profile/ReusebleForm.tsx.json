{
    "sourceFile": "frontend/components/settings/Profile/ReusebleForm.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1741031546411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741031581719,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,8 @@\n import { AccountSchema } from \"@/lib/vaildation\";\r\n import { DashboardHook } from \"../../context/Dashboardprovider\";\r\n import { AccountHook } from \"@/components/context/AccountProvider\";\r\n import { UserInformation } from \"@/types\";\r\n-import AccountInfo from \"./AccountInfo\";\r\n import { useSession } from \"next-auth/react\";\r\n import { Button } from \"@/components/ui/button\";\r\n import { UseUpdateUser } from \"@/actions/mutation\";\r\n import { Divider } from \"antd\";\r\n"
                },
                {
                    "date": 1741031588360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,8 @@\n   children:React.ReactNode;\r\n   innerText:string;\r\n }\r\n const ReusebleForm = ({\r\n-  user,\r\n   children,\r\n   innerText\r\n }: ReusebleFormDataProps) => {\r\n   const { ProfileEdit, setProfileEdit, isLoading ,form} = AccountHook();\r\n"
                },
                {
                    "date": 1741031621222,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n   const { ProfileEdit, setProfileEdit, isLoading ,form} = AccountHook();\r\n   const { api } = DashboardHook();\r\n   const { data: session } = useSession();\r\n \r\n-  const updateUser = UseUpdateUser(api, session.u?._id);\r\n+  const updateUser = UseUpdateUser(api, session?.user?._id);\r\n \r\n   const handleEdit = () => {\r\n     setProfileEdit(false);\r\n   };\r\n"
                }
            ],
            "date": 1741031546411,
            "name": "Commit-0",
            "content": "\"use client\";\r\nimport React from \"react\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { Form } from \"@/components/ui/form\";\r\nimport SubmitButton from \"../../togglers/SubmitButton\";\r\nimport { AccountSchema } from \"@/lib/vaildation\";\r\nimport { DashboardHook } from \"../../context/Dashboardprovider\";\r\nimport { AccountHook } from \"@/components/context/AccountProvider\";\r\nimport { UserInformation } from \"@/types\";\r\nimport AccountInfo from \"./AccountInfo\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { UseUpdateUser } from \"@/actions/mutation\";\r\nimport { Divider } from \"antd\";\r\nimport AccountReusebleHeader from \"./ReusebleHeader\";\r\n\r\ninterface ReusebleFormDataProps {\r\n  user: UserInformation | undefined;\r\n  isFetching: boolean;\r\n  children:React.ReactNode;\r\n  innerText:string;\r\n}\r\nconst ReusebleForm = ({\r\n  user,\r\n  isFetching,\r\n  children,\r\n  innerText\r\n}: ReusebleFormDataProps) => {\r\n  const { ProfileEdit, setProfileEdit, isLoading ,form} = AccountHook();\r\n  const { api } = DashboardHook();\r\n  const { data: session } = useSession();\r\n\r\n  const updateUser = UseUpdateUser(api, user?._id);\r\n\r\n  const handleEdit = () => {\r\n    setProfileEdit(false);\r\n  };\r\n\r\n  const onSubmit = (values: z.infer<typeof AccountSchema>) => {\r\n    const formData = new FormData();\r\n\r\n    const data = {\r\n      name: values.name,\r\n      occupation: values.occupation,\r\n    };\r\n\r\n    Object.entries(data).forEach(([key, value]) => {\r\n      if (value !== undefined && value !== null && value !== \"\") {\r\n        formData.append(key, value as string);\r\n      }\r\n    });\r\n    try {\r\n      console.log(formData);\r\n      updateUser.mutate(formData);\r\n    } catch (error: any) {\r\n      console.log(`error from Account profile: ${error.message}`);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"flex flex-col justify-center items-start col-span-12 bg-[var(--sidebar-background)] rounded-md shadow-md shadow-slate-300 dark:shadow-slate-800\">\r\n      <AccountReusebleHeader showMenu innerText={innerText} />\r\n      <Divider className=\" dark:bg-slate-500 m-0 w-full\" />\r\n\r\n      <Form {...form}>\r\n        <form\r\n          onSubmit={form.handleSubmit(onSubmit)}\r\n          className=\"flex flex-col p-8 pb-10 pt-0 w-full \"\r\n        >\r\n          <div className=\"grid grid-cols-12\">\r\n           {children}\r\n          </div>\r\n          {ProfileEdit && (\r\n            <div className=\"flex justify-end items-center w-full \">\r\n              <Button\r\n                className=\"bg-slate-100 max-h-[25px] mx-2\"\r\n                onClick={handleEdit}\r\n              >\r\n                cancel\r\n              </Button>\r\n              <SubmitButton\r\n                className=\"bg-slate-800 text-slate-50 max-h-[25px]\"\r\n                isLoading={isLoading}\r\n                innerText=\" \" // importtant\r\n              >\r\n                change\r\n              </SubmitButton>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReusebleForm;\r\n"
        }
    ]
}